# XBooster（Chrome 扩展）

一个强大的 Chrome 浏览器扩展，帮助你在 X（Twitter）平台上快速生成高质量评论、批量处理回复，并提供智能翻译功能。

## ✨ 核心功能

### 1. 智能评论生成
- **单条回复**：点击扩展图标，自动读取当前帖子内容，基于 AI 生成个性化评论
- **批量回复**：右下角浮窗批量生成当前页面多条帖子的回复（支持队列并发处理，自动续扫新帖）
- **一键填入**：生成的评论可一键填入回复框或复制到剪贴板

### 2. 情绪选择器（TONE）
- 弹窗与右下角控制台中均提供一排 **emoji 情绪快捷键**（如 😊、💼、❓、😄、🤔、⚡、🧐、💡）
- 点击任意 emoji 即可切换当前评论语气；当前选中的情绪会带有柔和高亮与绿色角标
- 控制台与弹窗情绪状态是同步的（包括右下角小老虎按钮）

### 3. 智能翻译
- **翻译开关**：在设置中可以总开关“启用翻译功能”
- **帖子自动翻译**：支持自动翻译当前帖子内容（**默认关闭，可手动开启**）
- **手动翻译**：在弹窗中进行读取后，可按需手动触发/刷新翻译
- **多语言支持**：可配置目标语言（默认：中文简体）

### 4. 悬浮按钮
- 在 X 输入框工具栏添加情绪表情按钮
- 一键生成草稿并自动写入输入框
- 使用当前选中的情绪风格生成内容

### 5. 统计看板
- **今日处理概览**：实时显示已处理、成功、失败的评论数量
- **数据持久化**：统计数据按日期保存
- **批量回复统计**：自动统计批量回复的处理结果

### 6. 潜力指数智能筛选
- **权重配置**：可自定义时间权重和竞争权重，智能评估帖子回复价值
- **潜力等级**：根据发布时间和回复数计算潜力指数，分为高⭐⭐⭐、中⭐⭐、低⭐三个等级
- **筛选条件**：可选择只回复特定潜力等级的帖子
- **蓝V筛选**：支持仅回复认证用户（蓝V）的帖子
- **自动点赞**：回复后可自动为该推文点赞（默认开启）

### 7. 快速书签管理
- **自定义书签**：添加常用搜索链接，快速访问
- **智能日期**：支持自动更新URL中的日期参数（如 `since:2026-01-14`）
- **图标标识**：为每个书签设置emoji图标，便于识别
- **一键跳转**：在弹窗中快速访问预设的搜索页面

### 8. 自定义配置
- **AI 接口选择**：支持 OpenAI 官方接口或自定义兼容接口
- **多代理站支持**：可配置多个代理站实现负载均衡，推荐使用钱多多API
- **提示词模板**：自定义评论生成模板，支持变量替换
- **提示词历史**：保存历史提示词，便于调试与对比
- **模型选择**：支持 GPT-3.5 Turbo、GPT-4、GPT-4 Turbo 等模型
- **变量开关**：灵活控制作者handle、语气等变量的使用

### 9. 实验性功能（灰度测试）
- **写作功能**：新推文生成，可将主题/草稿扩写成推文
- **翻译功能**：帖子和评论翻译，支持多语言
- **调试预览**：提示词测试预览，实时查看LLM输出效果
- *注：实验性功能尚未充分测试，不影响核心的回复生成功能*

### 10. 页面上下文检测
智能识别当前页面类型：
- 📄 帖子详情页
- 🏠 首页
- 👤 用户主页
- 🔍 探索页
- 🔎 搜索结果页

### 11. 故障定位
- 接口返回非 200 时显示详细状态码和错误信息
- 便于排查 API Key、URL、权限等问题
- 提供清晰的错误提示和解决建议

## 🚀 快速开始

### 安装步骤

1. **下载或克隆项目**
   ```bash
   git clone <repository-url>
   cd xbooster
   ```

2. **加载扩展**
   - 打开 Chrome 浏览器
   - 访问 `chrome://extensions/`
   - 开启右上角的"开发者模式"
   - 点击"加载已解压的扩展程序"
   - 选择项目根目录

3. **配置 API Key**
   - 点击扩展图标，打开设置页面
   - 配置 OpenAI API Key 或自定义接口
   - 选择模型和语言设置

## 📖 使用指南

### 单条回复流程
1. 在 X 平台上打开任意帖子
2. 点击浏览器工具栏的扩展图标
3. 扩展自动读取帖子内容
4. 选择情绪风格（可选）
5. 点击"生成评论"
6. 复制或直接填入回复框

### 批量回复流程
1. 在 X 时间线或搜索结果页面
2. 点击右下角浮窗的"开始"按钮
3. 扩展自动扫描页面上的帖子，按潜力指数智能排序
4. 批量生成评论（支持并发处理）
5. 在结果卡片中选择"填入输入框"或"复制"
6. 自动续扫新加载的帖子
7. 填入输入框后可自动点赞（可在设置中关闭）

### 潜力筛选配置
1. 在设置页面调整时间权重和竞争权重（默认各50%）
2. 设置高潜力和中潜力的阈值分数
3. 选择要生成回复的潜力等级（高/中/低）
4. 可开启"仅回复蓝V用户"选项

### 快速书签使用
1. 在设置页面添加常用搜索链接
2. 设置书签图标和名称
3. 勾选"自动日期"可让系统自动更新URL中的日期参数
4. 在弹窗中点击书签图标即可快速跳转

### 悬浮按钮使用（小老虎助手）
1. 在 X 输入框工具栏找到情绪表情按钮
2. 点击按钮，使用当前情绪生成草稿
3. 草稿自动写入输入框

### 翻译功能
1. **启用翻译功能**：在设置中勾选“启用翻译功能”
2. **帖子自动翻译（可选）**：如需在读取帖子时自动展示翻译，可再勾选“自动翻译帖子”（默认关闭）
3. **手动翻译**：保持自动翻译关闭时，你仍可在弹窗中按需触发翻译
4. **目标语言**：在设置中选择翻译目标语言

## ⚙️ 配置说明

### API/模型配置
- **OpenAI 官方**：使用 OpenAI 官方 API
- **自定义接口**：支持配置兼容 OpenAI 格式的代理站
- **多代理站**：可添加多个代理站，支持启用/禁用和负载均衡
- **模型选择**：GPT-3.5 Turbo（推荐）、GPT-4、GPT-4 Turbo

### 翻译配置
- **启用翻译功能**：总开关，控制是否对评论和帖子提供翻译支持
- **帖子自动翻译（默认关闭）**：是否在读取帖子时自动翻译正文
- **目标语言**：设置翻译目标语言（默认：中文简体）

### 提示词配置
- **默认提示词模板**：自定义评论生成模板
- **变量支持**：支持 `{{author_handle}}`、`{{content}}`、`{{tone_label}}` 等变量
- **润色风格**：选择 AI 润色风格模板

### 批量回复配置
- **并发上限**：在 `bulk-reply.js` 中可调整（默认：2）
- **自动续扫**：自动扫描新加载的帖子
- **手动控制**：支持开始/停止/刷新操作
- **潜力权重**：可自定义时间权重和竞争权重（总和为100%）
- **阈值设置**：可调整高潜力（默认≥70分）和中潜力（默认≥40分）的分数线
- **筛选条件**：可选择仅回复特定潜力等级或蓝V用户
- **自动点赞**：可设置回复后自动点赞（默认开启）

### 提示词配置
- **评论/回复模板**：统一的评论和回复生成模板
- **写作模板**：新推文扩写模板（实验性功能）
- **历史管理**：保存最多30条历史提示词，便于回退和对比
- **变量支持**：支持 `{{author_handle}}`、`{{content}}`、`{{tone_label}}`、`{{locale}}` 等变量
- **变量开关**：可控制作者handle和语气变量的启用状态

### 书签管理
- **自定义书签**：添加常用搜索或页面链接
- **图标设置**：为每个书签设置emoji图标
- **智能日期**：自动更新URL中的 `since:` 日期参数
- **快速访问**：在弹窗中一键跳转到预设页面

## 📁 项目结构

```
xbooster/
├── manifest.json              # 扩展配置文件
├── popup.html/css/js         # 主弹窗界面
├── settings.html/css/js      # 设置页面
├── content.js                # 页面内容提取脚本
├── background.js             # 后台服务脚本（AI/翻译调用）
├── x-inline.js               # 输入框悬浮按钮
├── bulk-reply.js             # 批量回复浮窗与队列
├── prompt-templates.json      # 提示词模板配置
├── emotions.json             # 情绪配置
├── icons/                    # 图标资源
│   ├── icon16.png
│   ├── icon48.png
│   └── icon128.png
└── README.md                 # 本文档
```

## 🔧 技术特性

- **Manifest V3**：使用最新的 Chrome 扩展规范
- **Service Worker**：后台服务使用 Service Worker
- **Content Scripts**：页面内容提取和交互
- **Storage API**：使用 Chrome Storage 保存配置和统计数据
- **异步处理**：支持并发队列处理批量任务
- **错误处理**：完善的错误提示和故障定位

## ⚠️ 注意事项

1. **平台限制**：仅在 `x.com` 和 `pro.x.com` 平台工作
2. **API 配置**：需要配置有效的 API Key 或自定义接口 URL 才能生成评论
   - 推荐使用钱多多API（[注册链接](https://api2.aigcbest.top/register?aff=Jdcp)）
   - 可配置多个代理站实现负载均衡
3. **网络要求**：需要稳定的网络连接访问 AI 接口
4. **批量填入**：卡片的"填入输入框"会自动点击回复按钮并写入弹窗输入框
5. **自动点赞**：填入回复后会自动点赞该推文（可在设置中关闭）
6. **潜力筛选**：首次使用建议保持默认配置，熟悉后再调整权重和阈值
7. **实验性功能**：写作和翻译功能仍在灰度测试中，可能存在不稳定情况
8. **故障排查**：如生成失败，请检查：
   - API 配置是否正确
   - 网络连接是否正常
   - 确认当前页面为帖子详情页或时间线
   - 尝试刷新页面后重试
   - 在社区中寻求帮助

## 🔒 隐私与安全

- 所有配置数据存储在本地（Chrome Storage）
- API Key 仅用于调用配置的接口
- 不收集用户个人信息
- 支持自定义接口，可完全控制数据流向

## 📝 更新日志

### v1.0.1（当前版本）
- ✨ 新增潜力指数智能筛选系统
- ✨ 新增快速书签管理功能
- ✨ 新增回复后自动点赞功能
- ✨ 新增提示词历史管理
- ✨ 新增社区与反馈入口
- ✨ 新增代理站推荐（钱多多API）
- 🎨 优化设置页面布局，区分核心功能和实验性功能
- 🔧 写作和翻译功能标记为灰度测试
- 🐛 修复若干已知问题

### v1.0.0
- ✨ 初始版本发布
- ✅ 单条回复生成
- ✅ 批量回复处理
- ✅ 情绪选择器（8种风格）
- ✅ 智能翻译功能
- ✅ 悬浮按钮
- ✅ 统计看板
- ✅ 自定义 API 配置
- ✅ 页面上下文检测
- ✅ 故障定位功能

## 📄 许可证

本项目采用 MIT 许可证。

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📧 联系方式

### 社区与支持
- **作者主页**：[@eggyrooch](https://x.com/eggyrooch)
- **插件社区**：[XBooster 社区](https://x.com/i/communities/2009675434196160590)
- **GitHub Issues**：欢迎通过 Issues 反馈问题

### 反馈渠道
如遇到功能Bug、产品建议或使用疑问，欢迎通过以下方式联系：
1. 在 X 社区中发帖讨论
2. 关注作者获取最新动态
3. 提交 GitHub Issues
